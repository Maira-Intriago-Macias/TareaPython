class InventarioTienda:
    def __init__(self):
        self.inventario = {}  # {producto: cantidad}
        self.agotados = set()  # Productos sin stock    
    def agregar_producto(self):
        """Agrega un nuevo producto al inventario"""
        print("   AGREGAR PRODUCTO")
        producto = input("Nombre del producto: ").strip().title()
        if not producto:
            print("‚ùå El nombre del producto no puede estar vac√≠o")
            return
        if producto in self.inventario:
            print(f"{producto} ya existe en el inventario")
            print(f"Cantidad actual: {self.inventario[producto]}")
            return
        # Validar cantidad
        while True:
            try:
                cantidad = int(input("Cantidad inicial: "))
                if cantidad < 0:
                    print("‚ùå La cantidad no puede ser negativa")
                    continue
                break
            except ValueError:
                print("‚ùå Por favor ingresa un n√∫mero v√°lido")
        # Agregar producto
        self.inventario[producto] = cantidad
        # Si la cantidad es 0, agregar a agotados
        if cantidad == 0:
            self.agotados.add(producto)
            print(f"Producto agregado pero SIN STOCK")
        else:
            # Si estaba en agotados y ahora tiene stock, removerlo
            if producto in self.agotados:
                self.agotados.remove(producto)
            print(f"Producto agregado exitosamente!")
        print(f"Producto: {producto}")
        print(f"Cantidad: {cantidad}")
    def vender_producto(self):
        """Vende productos (resta cantidad del inventario)"""
        print("   VENDER PRODUCTO")
        if not self.inventario:
            print("El inventario est√° vac√≠o")
            return
        producto = input("Nombre del producto a vender: ").strip().title()
        if producto not in self.inventario:
            print(f"‚ùå {producto} no existe en el inventario")
            return
        cantidad_actual = self.inventario[producto]
        if cantidad_actual == 0:
            print(f"‚ùå {producto} est√° AGOTADO. No se puede vender")
            return
        print(f"Stock disponible de {producto}: {cantidad_actual}")
        # Validar cantidad a vender
        while True:
            try:
                cantidad_vender = int(input("Cantidad a vender: "))
                if cantidad_vender <= 0:
                    print("‚ùå La cantidad debe ser mayor a 0")
                    continue
                if cantidad_vender > cantidad_actual:
                    print(f"‚ùå No hay suficiente stock. Solo hay {cantidad_actual} unidades")
                    continue
                break
            except ValueError:
                print("‚ùå Por favor ingresa un n√∫mero v√°lido")
        # Realizar venta
        nueva_cantidad = cantidad_actual - cantidad_vender
        self.inventario[producto] = nueva_cantidad
        print(f"Venta realizada exitosamente!")
        print(f"Producto: {producto}")
        print(f"Vendido: {cantidad_vender} unidades")
        print(f"Nuevo stock: {nueva_cantidad}")
        # Verificar si se agot√≥
        if nueva_cantidad == 0:
            self.agotados.add(producto)
            print("¬°ATENCI√ìN! Este producto se ha AGOTADO")
        else:
            # Si ten√≠a stock y ahora tambi√©n, asegurarse de que no est√© en agotados
            if producto in self.agotados:
                self.agotados.remove(producto)
    def reponer_stock(self):
        """Muestra el inventario completo"""
        print("   INVENTARIO COMPLETO")
        if not self.inventario:
            print("El inventario est√° vac√≠o")
            return
        # Ordenar productos alfab√©ticamente
        productos_ordenados = sorted(self.inventario.items())
        total_productos = len(self.inventario)
        total_stock = sum(self.inventario.values())
        total_agotados = len(self.agotados)
        print(f"Resumen: {total_productos} productos | {total_stock} unidades | {total_agotados} agotados")
        for producto, cantidad in productos_ordenados:
            estado = "üî¥ AGOTADO" if producto in self.agotados else "üü¢ DISPONIBLE"
            print(f"{producto:20} | {cantidad:3d} unidades | {estado}")
    def mostrar_agotados(self):
        """Muestra solo los productos agotados"""
        print("   PRODUCTOS AGOTADOS")
        if not self.agotados:
            print("No hay productos agotados")
            return
        agotados_ordenados = sorted(self.agotados)
        print(f"Total de productos agotados: {len(self.agotados)}")
        for i, producto in enumerate(agotados_ordenados, 1):
            print(f"{i}. {producto}")
    def buscar_producto(self):
        """Busca productos en el inventario"""
        print("   BUSCAR PRODUCTO")
        if not self.inventario:
            print("El inventario est√° vac√≠o")
            return
        busqueda = input("Ingresa parte del nombre del producto: ").strip().title()
        if not busqueda:
            print("‚ùå La b√∫squeda no puede estar vac√≠a")
            return
        resultados = []
        for producto, cantidad in self.inventario.items():
            if busqueda in producto:
                estado = "üî¥ AGOTADO" if producto in self.agotados else "üü¢ DISPONIBLE"
                resultados.append((producto, cantidad, estado))
        if resultados:
            print(f"Se encontraron {len(resultados)} resultado(s):")
            for producto, cantidad, estado in resultados:
                print(f"{producto:20} | {cantidad:3d} unidades | {estado}")
        else:
            print(f"No se encontraron productos con '{busqueda}'")
    def mostrar_menu(self):
        """Muestra el men√∫ principal"""
        print("   SISTEMA DE INVENTARIO - TIENDA")
        print("1. Agregar producto")
        print("2. Vender producto")
        print("3. Mostrar inventario completo")
        print("4. Mostrar productos agotados")
        print("5. Buscar producto")
        print("6. Salir")
    def ejecutar(self):
        """Ejecuta el sistema principal"""
        print("¬°Bienvenido al Sistema de Inventario!")
        while True:
            self.mostrar_menu()
            try:
                opcion = input("Selecciona una opci√≥n (1-6): ").strip()
                if opcion == "1":
                    self.agregar_producto()
                elif opcion == "2":
                    self.vender_producto()
                elif opcion == "3":
                    self.mostrar_inventario()
                elif opcion == "4":
                    self.mostrar_agotados()
                elif opcion == "5":
                    self.buscar_producto()
                elif opcion == "6":
                    print("¬°Gracias por usar el Sistema de Inventario!")
                    print("¬°Hasta pronto!")
                    break
                else:
                    print("‚ùå Opci√≥n no v√°lida. Por favor selecciona 1-7")
            except KeyboardInterrupt:
                print("Programa interrumpido por el usuario")
                break
            except Exception as e:
                print(f"‚ùå Error inesperado: {e}")
# Ejecutar el sistema
if __name__ == "__main__":
    sistema = InventarioTienda()
    sistema.ejecutar()
