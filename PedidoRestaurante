class SistemaPedidosRestaurante:
    def __init__(self):
        self.pedidos_activos = []  # Lista de diccionarios con pedidos activos
        # Menú predefinido de platos con precios
        self.menu_platos = {
            1: {"nombre": "Pizza Margherita", "precio": 12.50},
            2: {"nombre": "Hamburguesa Clásica", "precio": 10.00},
            3: {"nombre": "Ensalada César", "precio": 8.75},
            4: {"nombre": "Pasta Carbonara", "precio": 11.25},
            5: {"nombre": "Salmón a la Plancha", "precio": 15.00},
            6: {"nombre": "Sopa del Día", "precio": 6.50},
            7: {"nombre": "Sandwich Club", "precio": 9.25},
            8: {"nombre": "Lasagna", "precio": 13.00},
            9: {"nombre": "Agua Mineral", "precio": 2.50},
            10: {"nombre": "Refresco", "precio": 3.00},
            11: {"nombre": "Café", "precio": 2.00},
            12: {"nombre": "Postre del Día", "precio": 5.50}
        }
    def mostrar_menu_platos(self):
        """Muestra el menú de platos disponibles"""
        print("       MENÚ DEL RESTAURANTE")
        for numero, plato in self.menu_platos.items():
            print(f"{numero:2d}. {plato['nombre']:25} ${plato['precio']:5.2f}")
        print("Tip: Puedes seleccionar varios platos separados por comas")
        print("   Ejemplo: 1,3,5 o solo 2")
    def agregar_pedido(self):
        """Agrega un nuevo pedido a la lista de activos"""
        print("   NUEVO PEDIDO")
        # Validar número de mesa
        while True:
            try:
                mesa = int(input("Número de mesa: "))
                if mesa <= 0:
                    print("❌ El número de mesa debe ser mayor a 0")
                    continue
                break
            except ValueError:
                print("❌ Por favor ingresa un número válido")
        # Mostrar menú de platos
        self.mostrar_menu_platos()
        # Seleccionar platos del menú
        platos = []
        print("Selecciona los platos del menú:")
        while True:
            try:
                seleccion = input("Números de platos (ej: 1,3,5) o 0 para terminar: ").strip()
                if seleccion == "0":
                    break
                if not seleccion:
                    print("❌ Debes ingresar al menos un número")
                    continue
                # Procesar la selección (puede ser individual o múltiple)
                numeros_platos = []
                if "," in seleccion:
                    numeros_platos = [int(x.strip()) for x in seleccion.split(",")]
                else:
                    numeros_platos = [int(seleccion)]
                # Validar números seleccionados
                platos_invalidos = []
                platos_validos = []
                for num in numeros_platos:
                    if num in self.menu_platos:
                        plato_info = self.menu_platos[num]
                        platos.append({
                            "nombre": plato_info["nombre"],
                            "precio": plato_info["precio"]
                        })
                        platos_validos.append(num)
                    else:
                        platos_invalidos.append(num)
                # Mostrar resultados de la selección
                if platos_validos:
                    print("Platos agregados:")
                    for num in platos_validos:
                        plato = self.menu_platos[num]
                        print(f"   - {plato['nombre']} (${plato['precio']:.2f})")
                if platos_invalidos:
                    print(f"❌ Números inválidos: {platos_invalidos}")
                    print("   Por favor usa números del 1 al 12")
                if platos:
                    print(f"Total de platos en el pedido: {len(platos)}")
            except ValueError:
                print("❌ Por favor ingresa números válidos (ej: 1,3,5)")
        if not platos:
            print("❌ Debes agregar al menos un plato al pedido")
            return
        # Calcular total
        total = sum(plato["precio"] for plato in platos)
        # Crear pedido
        pedido = {
            "mesa": mesa,
            "platos": platos,
            "total": total,
            "estado": "pendiente"
        }
        self.pedidos_activos.append(pedido)
        print(f"¡Pedido registrado exitosamente!")
        print(f"Mesa: {mesa}")
        print(f"Total de platos: {len(platos)}")
        print(f"Total a pagar: ${total:.2f}")
        print(f"Pedidos activos: {len(self.pedidos_activos)}")
    def entregar_pedido(self):
        """Marca un pedido como entregado (lo elimina de la lista)"""
        print("   ENTREGAR PEDIDO")
        if not self.pedidos_activos:
            print("No hay pedidos activos")
            return
        self.mostrar_pedidos_pendientes()
        # Seleccionar pedido a entregar
        while True:
            try:
                indice = int(input("\nNúmero del pedido a entregar: ")) - 1
                if 0 <= indice < len(self.pedidos_activos):
                    break
                else:
                    print(f"❌ Ingresa un número entre 1 y {len(self.pedidos_activos)}")
            except ValueError:
                print("❌ Por favor ingresa un número válido")
        pedido_entregado = self.pedidos_activos.pop(indice)
        print(f"¡Pedido entregado exitosamente!")
        print(f"Mesa: {pedido_entregado['mesa']}")
        print(f"Platos entregados: {len(pedido_entregado['platos'])}")
        print(f"Total cobrado: ${pedido_entregado['total']:.2f}")
        print(f"Pedidos restantes: {len(self.pedidos_activos)}")
    def mostrar_pedidos_pendientes(self):
        """Muestra todos los pedidos pendientes"""
        print("   PEDIDOS PENDIENTES")
        if not self.pedidos_activos:
            print("No hay pedidos pendientes")
            print("¡Todo está al día!")
            return
        print(f"Total de pedidos pendientes: {len(self.pedidos_activos)}")
        for i, pedido in enumerate(self.pedidos_activos, 1):
            print(f"Pedido #{i}")
            print(f"Mesa: {pedido['mesa']}")
            print(f"Platos:")
            for j, plato in enumerate(pedido['platos'], 1):
                print(f"      {j}. {plato['nombre']} - ${plato['precio']:.2f}")
            print(f"Total: ${pedido['total']:.2f}")
            print(f"Estado: {pedido['estado']}")
    def buscar_pedido_por_mesa(self):
        """Busca pedidos por número de mesa"""
        print("   BUSCAR PEDIDO POR MESA")
        if not self.pedidos_activos:
            print("No hay pedidos activos")
            return
        try:
            mesa_buscar = int(input("Número de mesa a buscar: "))
        except ValueError:
            print("❌ Por favor ingresa un número válido")
            return
        pedidos_mesa = [pedido for pedido in self.pedidos_activos if pedido['mesa'] == mesa_buscar]
        if not pedidos_mesa:
            print(f"❌ No hay pedidos activos para la mesa {mesa_buscar}")
            return
        print(f"\n✅ Se encontraron {len(pedidos_mesa)} pedido(s) para la mesa {mesa_buscar}")
        for i, pedido in enumerate(pedidos_mesa, 1):
            print(f"Pedido #{i}")
            print(f"Platos: {len(pedido['platos'])}")
            print(f"Total: ${pedido['total']:.2f}")
            print(f"Estado: {pedido['estado']}")
            print("Detalle de platos:")
            for plato in pedido['platos']:
                print(f"      • {plato['nombre']} - ${plato['precio']:.2f}")
    def mostrar_estadisticas(self):
        """Muestra estadísticas de los pedidos"""
        print("   ESTADÍSTICAS")
        if not self.pedidos_activos:
            print("No hay pedidos activos")
            return
        total_pedidos = len(self.pedidos_activos)
        total_ingresos = sum(pedido['total'] for pedido in self.pedidos_activos)
        total_platos = sum(len(pedido['platos']) for pedido in self.pedidos_activos)
        # Mesas con pedidos activos
        mesas_activas = set(pedido['mesa'] for pedido in self.pedidos_activos)
        print(f"Pedidos activos: {total_pedidos}")
        print(f"Ingresos pendientes: ${total_ingresos:.2f}")
        print(f"Total de platos: {total_platos}")
        print(f"Mesas activas: {len(mesas_activas)}")
        print(f"Mesas: {', '.join(map(str, sorted(mesas_activas)))}")
        # Plato más caro y más popular
        plato_mas_caro = None
        precio_maximo = 0
        contador_platos = {}
        for pedido in self.pedidos_activos:
            for plato in pedido['platos']:
                # Plato más caro
                if plato['precio'] > precio_maximo:
                    precio_maximo = plato['precio']
                    plato_mas_caro = plato['nombre']
                # Contar frecuencia de platos
                nombre_plato = plato['nombre']
                contador_platos[nombre_plato] = contador_platos.get(nombre_plato, 0) + 1
        if plato_mas_caro:
            print(f"Plato más caro: {plato_mas_caro} - ${precio_maximo:.2f}")
        # Plato más popular
        if contador_platos:
            plato_popular = max(contador_platos, key=contador_platos.get)
            print(f"Plato más popular: {plato_popular} ({contador_platos[plato_popular]} pedidos)")
    def mostrar_menu_principal(self):
        """Muestra el menú principal del sistema"""
        print("   SISTEMA DE PEDIDOS - RESTAURANTE")
        print("1. Agregar nuevo pedido")
        print("2. Entregar pedido")
        print("3. Mostrar pedidos pendientes")
        print("4. Buscar pedido por mesa")
        print("5. Mostrar estadísticas")
        print("6. Ver menú de platos")
        print("7. Salir")
    def ejecutar(self):
        """Ejecuta el sistema principal"""
        print("¡Bienvenido al Sistema de Pedidos del Restaurante!")
        while True:
            self.mostrar_menu_principal()
            try:
                opcion = input("\nSelecciona una opción (1-7): ").strip()
                if opcion == "1":
                    self.agregar_pedido()
                elif opcion == "2":
                    self.entregar_pedido()
                elif opcion == "3":
                    self.mostrar_pedidos_pendientes()
                elif opcion == "4":
                    self.buscar_pedido_por_mesa()
                elif opcion == "5":
                    self.mostrar_estadisticas()
                elif opcion == "6":
                    self.mostrar_menu_platos()
                elif opcion == "7":
                    print("¡Gracias por usar el Sistema de Pedidos!")
                    print("¡Buen provecho!")
                    break
                else:
                    print("❌ Opción no válida. Por favor selecciona 1-7")
            except KeyboardInterrupt:
                print("Programa interrumpido por el usuario")
                break
            except Exception as e:
                print(f"❌ Error inesperado: {e}")
# Ejecutar el sistema
if __name__ == "__main__":
    sistema = SistemaPedidosRestaurante()
    sistema.ejecutar()
