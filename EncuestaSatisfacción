class SistemaEncuestas:
    def __init__(self):
        self.respuestas = []  # Lista de tuplas: (cliente, puntuaci√≥n, comentario)    
    def agregar_encuesta(self):
        """Agrega una nueva respuesta de encuesta"""
        print("   NUEVA ENCUESTA DE SATISFACCI√ìN")
        cliente = input("Nombre del cliente: ").strip().title()
        if not cliente:
            print("‚ùå El nombre del cliente no puede estar vac√≠o")
            return
        # Validar puntuaci√≥n (1-10)
        while True:
            try:
                puntuacion = int(input("Puntuaci√≥n (1-10): "))
                if 1 <= puntuacion <= 10:
                    break
                else:
                    print("‚ùå La puntuaci√≥n debe estar entre 1 y 10")
            except ValueError:
                print("‚ùå Por favor ingresa un n√∫mero v√°lido")
        comentario = input("Comentario (opcional): ").strip()
        # Crear tupla de respuesta
        respuesta = (cliente, puntuacion, comentario)
        self.respuestas.append(respuesta)
        print(f"¬°Encuesta registrada exitosamente!")
        print(f"Cliente: {cliente}")
        print(f"Puntuaci√≥n: {puntuacion}/10")
        if comentario:
            print(f"Comentario: {comentario}")
    def calcular_media_satisfaccion(self):
        """Calcula y muestra la media de satisfacci√≥n"""
        print("   MEDIA DE SATISFACCI√ìN")
        if not self.respuestas:
            print("No hay encuestas registradas")
            return
        total_puntuaciones = sum(respuesta[1] for respuesta in self.respuestas)
        media = total_puntuaciones / len(self.respuestas)
        print(f"Total de encuestas: {len(self.respuestas)}")
        print(f"Puntuaci√≥n media: {media:.2f}/10")
        # Mostrar interpretaci√≥n de la media
        if media >= 9:
            print("Excelente nivel de satisfacci√≥n!")
            print("   Los clientes est√°n muy contentos")
        elif media >= 8:
            print("Buen nivel de satisfacci√≥n!")
            print("   Los clientes est√°n satisfechos")
        elif media >= 6:
            print("Satisfacci√≥n regular")
            print("   Hay espacio para mejorar")
        elif media >= 4:
            print("Satisfacci√≥n baja")
            print("   Se necesitan mejoras urgentes")
        else:
            print("Satisfacci√≥n muy baja!")
            print("Situaci√≥n cr√≠tica - revisar servicios")
        # Distribuci√≥n de puntuaciones
        print("Distribuci√≥n de puntuaciones:")
        for i in range(10, 0, -1):
            count = sum(1 for respuesta in self.respuestas if respuesta[1] == i)
            if count > 0:
                bar = "‚ñà" * count
                print(f"   {i:2d}: {bar} ({count})")
    def mostrar_comentarios_negativos(self):
        """Muestra los comentarios con puntuaci√≥n menor a 5"""
        print("   COMENTARIOS NEGATIVOS")
        print("   (Puntuaci√≥n < 5/10)")
        comentarios_negativos = [
            respuesta for respuesta in self.respuestas 
            if respuesta[1] < 5
        ]
        if not comentarios_negativos:
            print("No hay comentarios negativos")
            print("¬°Buen trabajo!")
            return
        print(f"Se encontraron {len(comentarios_negativos)} comentario(s) negativo(s)")    
        for i, (cliente, puntuacion, comentario) in enumerate(comentarios_negativos, 1):
            print(f"Comentario negativo #{i}:")
            print(f"Cliente: {cliente}")
            print(f"Puntuaci√≥n: {puntuacion}/10")
            print(f"Comentario: {comentario if comentario else 'Sin comentario'}")
    def mostrar_todas_encuestas(self):
        """Muestra todas las encuestas registradas"""
        print("   TODAS LAS ENCUESTAS")
        if not self.respuestas:
            print("No hay encuestas registradas")
            return
        print(f"Total de encuestas: {len(self.respuestas)}")
        for i, (cliente, puntuacion, comentario) in enumerate(self.respuestas, 1):    
            print(f"#{i:2d} {cliente}")
            print(f"Puntuaci√≥n: {puntuacion}/10")
            if comentario:
                print(f"Comentario: {comentario}")
    def mostrar_estadisticas_avanzadas(self):
        """Muestra estad√≠sticas detalladas"""
        print("   ESTAD√çSTICAS AVANZADAS")
        if not self.respuestas:
            print("No hay encuestas registradas")
            return
        total = len(self.respuestas)
        positivas = sum(1 for r in self.respuestas if r[1] >= 7)
        negativas = sum(1 for r in self.respuestas if r[1] < 5)
        regulares = total - positivas - negativas
        media = sum(r[1] for r in self.respuestas) / total
        print(f"Total de encuestas: {total}")
        print(f"Puntuaci√≥n media: {media:.2f}/10")
        print(f"M√°xima puntuaci√≥n: {max(r[1] for r in self.respuestas)}/10")
        print(f"M√≠nima puntuaci√≥n: {min(r[1] for r in self.respuestas)}/10")
        print(f"Distribuci√≥n:")
        print(f" üü¢ Positivas (7-10): {positivas} ({positivas/total*100:.1f}%)")
        print(f" üü° Regulares (5-6): {regulares} ({regulares/total*100:.1f}%)")
        print(f" üî¥ Negativas (1-4): {negativas} ({negativas/total*100:.1f}%)")        
        # Clientes m√°s satisfechos e insatisfechos
        if total >= 3:
            print(f"Top 3 clientes m√°s satisfechos:")
            top_satisfechos = sorted(self.respuestas, key=lambda x: x[1], reverse=True)[:3]
            for cliente, puntuacion, _ in top_satisfechos:
                print(f"{cliente}: {puntuacion}/10")
    def mostrar_menu(self):
        """Muestra el men√∫ principal"""
        print("   SISTEMA DE ENCUESTAS DE SATISFACCI√ìN")
        print("1. Agregar nueva encuesta")
        print("2. Calcular media de satisfacci√≥n")
        print("3. Mostrar comentarios negativos")
        print("4. Mostrar todas las encuestas")
        print("5. Mostrar estad√≠sticas avanzadas")
        print("6. Salir")
    def ejecutar(self):
        """Ejecuta el sistema principal"""
        print("¬°Bienvenido al Sistema de Encuestas de Satisfacci√≥n!")
        print("Eval√∫a la satisfacci√≥n de tus clientes del 1 al 10")
        while True:
            self.mostrar_menu()
            try:
                opcion = input("\nSelecciona una opci√≥n (1-6): ").strip()
                if opcion == "1":
                    self.agregar_encuesta()
                elif opcion == "2":
                    self.calcular_media_satisfaccion()
                elif opcion == "3":
                    self.mostrar_comentarios_negativos()
                elif opcion == "4":
                    self.mostrar_todas_encuestas()
                elif opcion == "5":
                    self.mostrar_estadisticas_avanzadas()
                elif opcion == "6":
                    print("¬°Gracias por usar el Sistema de Encuestas!")
                    print("¬°Hasta pronto!")
                    break
                else:
                    print("‚ùå Opci√≥n no v√°lida. Por favor selecciona 1-6")
            except KeyboardInterrupt:
                print("Programa interrumpido por el usuario")
                break
            except Exception as e:
                print(f"‚ùå Error inesperado: {e}")
# Ejecutar el sistema
if __name__ == "__main__":
    sistema = SistemaEncuestas()
    sistema.ejecutar()
